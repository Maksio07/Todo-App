"use strict";function _createForOfIteratorHelper(t,e){var o,n,r,a,d="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(d)return n=!(o=!0),{s:function(){d=d.call(t)},n:function(){var t=d.next();return o=t.done,t},e:function(t){n=!0,r=t},f:function(){try{o||null==d.return||d.return()}finally{if(n)throw r}}};if(Array.isArray(t)||(d=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length)return d&&(t=d),a=0,{s:e=function(){},n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var o;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(o="Object"===(o=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:o)||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,e):void 0}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}var themeIcon,addInput,checkBtn,deleteBtn,countOfTodo,allBtn,activeBtn,completedBtn,clearComletedBtn,output,error,addBtn,outputList,outputListArr,btnArea,allTodo,activeTodoesArr,completedTodoesArr,allTodoesArr,prepareDOMElements=function(){themeIcon=document.querySelector(".todo-up__presentation--theme-icon"),addInput=document.querySelector(".todo-up__add--input"),checkBtn=document.querySelector(".output__box--check"),deleteBtn=document.querySelector(".output__box--delete"),countOfTodo=document.querySelector(".amount"),allBtn=document.querySelector(".buttons__middle--all"),activeBtn=document.querySelector(".buttons__middle--active"),completedBtn=document.querySelector(".buttons__middle--completed"),clearComletedBtn=document.querySelector(".buttons__clear-completed"),output=document.querySelector(".output"),error=document.querySelector(".todo-up__error"),addBtn=document.querySelector(".todo-up__add--add-btn"),outputList=document.querySelectorAll(".output__box"),btnArea=document.querySelector(".buttons__middle"),outputListArr=_toConsumableArray(outputList)},prepareDOMEvents=function(){addInput.addEventListener("keyup",keyEventCheck),addBtn.addEventListener("click",addNewTodo),output.addEventListener("click",checkClick),output.addEventListener("mousemove",showDeleteBtn),output.addEventListener("mouseout",hideDeleteBtn),deleteBtn.addEventListener("click",deleteTodo),activeBtn.addEventListener("click",showActiveTodo),allBtn.addEventListener("click",showAllTodo),completedBtn.addEventListener("click",showCompletedTodo),btnArea.addEventListener("click",setFocus),clearComletedBtn.addEventListener("click",clearComleted),themeIcon.addEventListener("click",changeTheme)},main=function(){prepareDOMElements(),prepareDOMEvents()},addNewTodo=function(t){var e,o;t.preventDefault(),""!==addInput.value?((t=document.createElement("li")).textContent=addInput.value,t.classList.add("output__box"),t.setAttribute("data-box","".concat("dark"===document.body.dataset.bg?"dark":"light")),output.append(t),(e=document.createElement("button")).classList.add("output__box--check"),e.setAttribute("data-check","".concat("dark"===document.body.dataset.bg?"dark":"light")),(o=document.createElement("button")).classList.add("output__box--delete"),o.setAttribute("data-delete","".concat("dark"===document.body.dataset.bg?"dark":"light")),t.append(e,o),addInput.value="",error.textContent="",countTodoes(),outputListArr.push(t)):error.textContent="This field can't be empty"},checkClick=function(t){t.target.matches(".output__box--check")?(t.target.closest("li").classList.toggle("complete-todo"),t.target.closest("button").classList.toggle("complete"),countTodoes()):t.target.matches(".output__box--delete")&&deleteTodo(t)},showDeleteBtn=function(t){t.target.matches("li")?t.target.lastElementChild.style.display="flex":t.target.matches(".output__box--delete")&&(t.target.style.display="flex")},hideDeleteBtn=function(t){t.target.matches("li")&&(t.target.lastElementChild.style.display="none")},deleteTodo=function(t){t.target.closest("li").remove("li"),0===output.querySelectorAll("li").length&&(error.textContent="You have nothing to do."),countTodoes()},countTodoes=function(){var t=_toConsumableArray(allTodo=output.querySelectorAll("li")),e=t.filter(function(t){return t.classList.contains("complete-todo")&&t.firstElementChild.classList.contains("complete")}),t=t.filter(function(t){return!t.classList.contains("complete-todo")&&!t.firstElementChild.classList.contains("complete")});countOfTodo.textContent=allTodo.length-e.length,completedTodoesArr=[].concat(e),activeTodoesArr=[].concat(t),allTodoesArr=[].concat(e,t)},setFocus=function(e){_toConsumableArray(btnArea.querySelectorAll("button")).forEach(function(t){t.style.color="hsl(234, 11%, 52%)",e.target.style.color="hsl(220, 98%, 61%)"})},showActiveTodo=function(){output.innerHTML=activeTodoesArr.map(function(t){return' <li class="output__box" data-box="'.concat("dark"===document.body.dataset.bg?"dark":"light",'">\n            <button class="output__box--check" type="button" aria-label="check" data-check="').concat("dark"===document.body.dataset.bg?"dark":"light",'"></button>\n            ').concat(t.textContent,'\n            <button class="output__box--delete" type="button" aria-label="delete" data-delete="').concat("dark"===document.body.dataset.bg?"dark":"light",'"></button>\n        </li>')}).join("")},showAllTodo=function(){output.innerHTML=allTodoesArr.map(function(t){return'<li class="output__box '.concat(t.classList.contains("complete-todo")?"complete-todo":"",'" data-box="').concat("dark"===document.body.dataset.bg?"dark":"light",'">\n\t\t<button class="output__box--check ').concat(t.firstElementChild.classList.contains("complete")?"complete":"",'" type="button" aria-label="check" data-check="').concat("dark"===document.body.dataset.bg?"dark":"light",'"></button>\n\t\t\t').concat(t.textContent,'\n\t\t<button class="output__box--delete" type="button" aria-label="delete" data-delete="').concat("dark"===document.body.dataset.bg?"dark":"light",'"></button>\n\t</li>')}).join("")},showCompletedTodo=function(){output.innerHTML=completedTodoesArr.map(function(t){return'<li class="output__box complete-todo" data-box="'.concat("dark"===document.body.dataset.bg?"dark":"light",'">\n\t\t<button class="output__box--check complete" type="button" aria-label="check" data-check="').concat("dark"===document.body.dataset.bg?"dark":"light",'"></button>\n\t\t\t').concat(t.textContent,'\n\t\t<button class="output__box--delete" type="button" aria-label="delete" data-delete="').concat("dark"===document.body.dataset.bg?"dark":"light",'"></button>\n\t</li>')}).join("")},clearComleted=function(t){completedTodoesArr=[],allTodoesArr=activeTodoesArr,"rgb(58, 123, 253)"===activeBtn.style.color?showActiveTodo():"rgb(58, 123, 253)"===completedBtn.style.color?showCompletedTodo():(showAllTodo(),0===allTodoesArr.length?error.textContent="You have nothing to do.":error.textContent="")},changeTheme=function(t){var e=_toConsumableArray(document.querySelectorAll(".output__box--check")),o=_toConsumableArray(document.querySelectorAll(".output__box--delete")),n=document.querySelector(".buttons");themeIcon.classList.toggle("sun"),themeIcon.classList.toggle("moon"),themeIcon.classList.contains("moon")?(document.body.setAttribute("data-bg","light"),addInput.setAttribute("data-input","light"),allTodoesArr.forEach(function(t){t.setAttribute("data-box","light")}),e.forEach(function(t){return t.setAttribute("data-check","light")}),addBtn.setAttribute("data-add","light"),error.setAttribute("data-error","light"),o.forEach(function(t){return t.setAttribute("data-delete","light")}),n.setAttribute("data-buttons","light"),btnArea.setAttribute("data-middle","light")):(document.body.setAttribute("data-bg","dark"),addInput.setAttribute("data-input","dark"),allTodoesArr.forEach(function(t){t.setAttribute("data-box","dark")}),e.forEach(function(t){return t.setAttribute("data-check","dark")}),addBtn.setAttribute("data-add","dark"),error.setAttribute("data-error","dark"),o.forEach(function(t){return t.setAttribute("data-delete","dark")}),n.setAttribute("data-buttons","dark"),btnArea.setAttribute("data-middle","dark")),("rgb(58, 123, 253)"===activeBtn.style.color?showActiveTodo:"rgb(58, 123, 253)"===completedBtn.style.color?showCompletedTodo:showAllTodo)()},keyEventCheck=function(t){"Enter"===t.key&&addNewTodo()},sortableList=function(t){var e,a=allTodoesArr,d=null,o=_createForOfIteratorHelper(a);try{for(o.s();!(e=o.n()).done;)!function(){var r=e.value;r.draggable=!0,r.ondragstart=function(t){d=r;var e,o=_createForOfIteratorHelper(a);try{for(o.s();!(e=o.n()).done;){var n=e.value;n!=d&&n.classList.add("hint")}}catch(t){o.e(t)}finally{o.f()}},r.ondragenter=function(t){r!=d&&r.classList.add("active")},r.ondragleave=function(){return r.classList.remove("active")},r.ondragend=function(){var t,e=_createForOfIteratorHelper(a);try{for(e.s();!(t=e.n()).done;){var o=t.value;o.classList.remove("hint"),o.classList.remove("active")}}catch(t){e.e(t)}finally{e.f()}},r.ondragover=function(t){return t.preventDefault()},r.ondrop=function(t){if(t.preventDefault(),r!=d){for(var e=0,o=0,n=0;n<a.length;n++)d==a[n]&&(e=n),r==a[n]&&(o=n);e<o?r.parentNode.insertBefore(d,r.nextSibling):r.parentNode.insertBefore(d,r)}}}()}catch(t){o.e(t)}finally{o.f()}};window.addEventListener("DOMContentLoaded",main),window.addEventListener("DOMContentLoaded",countTodoes),window.addEventListener("DOMContentLoaded",sortableList);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsidGhlbWVJY29uIiwiYWRkSW5wdXQiLCJjaGVja0J0biIsImRlbGV0ZUJ0biIsImNvdW50T2ZUb2RvIiwiYWxsQnRuIiwiYWN0aXZlQnRuIiwiY29tcGxldGVkQnRuIiwiY2xlYXJDb21sZXRlZEJ0biIsIm91dHB1dCIsImVycm9yIiwiYWRkQnRuIiwib3V0cHV0TGlzdEFyciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFjdGl2ZVRvZG9lc0FyciIsImNvbXBsZXRlZFRvZG9lc0FyciIsImFsbFRvZG9lc0FyciIsInByZXBhcmVET01FbGVtZW50cyIsIm91dHB1dExpc3QiLCJidG5BcmVhIiwicXVlcnlTZWxlY3RvckFsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJrZXlFdmVudENoZWNrIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiY2hlY2tDbGljayIsInByZXBhcmVET01FdmVudHMiLCJhZGROZXdUb2RvIiwic2hvd0FsbFRvZG8iLCJzaG93RGVsZXRlQnRuIiwiaGlkZURlbGV0ZUJ0biIsInNldEZvY3VzIiwiZGVsZXRlVG9kbyIsInNob3dBY3RpdmVUb2RvIiwiZSIsImNoZWNrIiwicmVtb3ZlIiwicHJldmVudERlZmF1bHQiLCJ2YWx1ZSIsImNyZWF0ZUVsZW1lbnQiLCJuZXdUb2RvIiwidGV4dENvbnRlbnQiLCJhZGQiLCJjb25jYXQiLCJib2R5IiwiZGF0YXNldCIsImJnIiwic2V0QXR0cmlidXRlIiwiY2xhc3NMaXN0IiwicHVzaCIsImNvdW50VG9kb2VzIiwidGFyZ2V0IiwibWF0Y2hlcyIsInRvZ2dsZSIsImNsb3Nlc3QiLCJsYXN0RWxlbWVudENoaWxkIiwic3R5bGUiLCJkaXNwbGF5IiwiYWxsVG9kbyIsInRvZG8iLCJhY3RpdmVBcnIiLCJjb21wbGV0ZUFyciIsImFsbFRvZG9BcnIiLCJmaWx0ZXIiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNvbnRhaW5zIiwiYnRuQXJlYUFyciIsImZvckVhY2giLCJidG4iLCJjb2xvciIsImxlbmd0aCIsImlubmVySFRNTCIsInNob3dDb21wbGV0ZWRUb2RvIiwiY2xlYXJDb21sZXRlZCIsImFjdGl2ZSIsImpvaW4iLCJjaGVja0J0bnMiLCJkZWxldGVCdG5zQXJyIiwiYnV0dG9uc1NlY3Rpb24iLCJhbGwiLCJsaSIsIm1hcCIsImNvbXBsZXRlIiwic29ydGFibGVMaXN0IiwiY3VycmVudCIsIm9uZHJhZ3N0YXJ0IiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsImNoZWNrQnRuc0FyciIsImVyciIsIm9uZHJhZ2VudGVyIiwib25kcmFnbGVhdmUiLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciIsIl9pdGVyYXRvcjMiLCJpdCIsImtleSIsIm9uZHJhZ292ZXIiLCJpdGVtcyIsImN1cnJlbnRwb3MiLCJfaXRlcmF0b3IiLCJzIiwiX3N0ZXAiLCJuIiwiZG9uZSIsIl9sb29wIiwiaSIsImRyYWdnYWJsZSIsImRyb3BwZWRwb3MiLCJmIiwiX3N0ZXAzIiwid2luZG93Iiwib25kcm9wIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsIm5leHRTaWJsaW5nIiwibWFpbiJdLCJtYXBwaW5ncyI6InFwREFBQSxJQUFJQSxVQUNBQyxTQUNBQyxTQUNBQyxVQUNBQyxZQUNBQyxPQUNBQyxVQUNBQyxhQUNBQyxpQkFSQVIsT0FDQUMsTUFDQUMsT0FDQUMsV0FDQUMsY0FDQUMsUUFFQUUsUUFFQUUsZ0JBQ0FDLG1CQUNBQyxhQUVBQyxtQkFBYSxXQUNqQlosVUFBV2EsU0FBQUMsY0FBQSxvQ0FBQSxFQUVYYixTQUFXWSxTQUFBQyxjQUFBLHNCQUFBLEVBRVhaLFNBQUlhLFNBQWVELGNBQUEscUJBQUEsRUFDbkJYLFVBQUlhLFNBQWtCRixjQUFBLHNCQUFBLEVBQ3RCVixZQUFJYSxTQUFZSCxjQUFBLFNBQUEsRUFFaEJULE9BQU1hLFNBQUFBLGNBQXFCLHVCQUFNLEVBT2hDWixVQU5TTyxTQUFXQyxjQUFjLDBCQUFDLEVBT25DUCxhQU5XTSxTQUFTQyxjQUFjLDZCQUF1QixFQU96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YUosR0FFVlcsR0FBS1IsRUFBTUgsS0FDZGEsRUFBYWIsR0FHWEksRUFBYVMsRUFDaEJGLEVBQUVPLFdBQVdDLGFBQWE3QixFQUFTcUIsRUFBRVMsV0FBVyxFQUVoRFQsRUFBRU8sV0FBV0MsYUFBYTdCLEVBQVNxQixDQUFDLENBRXRDLENBQ0QsQ0FDRCxFQWpEQSxDQWlEQyxDQUFBLE1BQUFoQixHQUFBVSxFQUFBakUsRUFBQXVELENBQUEsQ0FBQSxDQUFBLFFBQUFVLEVBQUFTLEVBQUEsQ0FBQSxDQUNGLEVBRUFFLE9BQU94RixpQkFBaUIsbUJBQW9CNkYsSUFBSSxFQUNoREwsT0FBT3hGLGlCQUFpQixtQkFBb0I0QixXQUFXLEVBQ3ZENEQsT0FBT3hGLGlCQUFpQixtQkFBb0I2RCxZQUFZIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IHRoZW1lSWNvblxyXG5sZXQgYWRkSW5wdXRcclxubGV0IGNoZWNrQnRuXHJcbmxldCBkZWxldGVCdG5cclxubGV0IGNvdW50T2ZUb2RvXHJcbmxldCBhbGxCdG5cclxubGV0IGFjdGl2ZUJ0blxyXG5sZXQgY29tcGxldGVkQnRuXHJcbmxldCBjbGVhckNvbWxldGVkQnRuXHJcbmxldCBvdXRwdXRcclxubGV0IGVycm9yXHJcbmxldCBhZGRCdG5cclxubGV0IG91dHB1dExpc3RcclxubGV0IG91dHB1dExpc3RBcnJcclxubGV0IGJ0bkFyZWFcclxuXHJcbmxldCBhbGxUb2RvXHJcblxyXG5sZXQgYWN0aXZlVG9kb2VzQXJyXHJcbmxldCBjb21wbGV0ZWRUb2RvZXNBcnJcclxubGV0IGFsbFRvZG9lc0FyclxyXG5cclxuY29uc3QgcHJlcGFyZURPTUVsZW1lbnRzID0gKCkgPT4ge1xyXG5cdHRoZW1lSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvLXVwX19wcmVzZW50YXRpb24tLXRoZW1lLWljb24nKVxyXG5cdGFkZElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8tdXBfX2FkZC0taW5wdXQnKVxyXG5cdGNoZWNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm91dHB1dF9fYm94LS1jaGVjaycpXHJcblx0ZGVsZXRlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm91dHB1dF9fYm94LS1kZWxldGUnKVxyXG5cdGNvdW50T2ZUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFtb3VudCcpXHJcblx0YWxsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbnNfX21pZGRsZS0tYWxsJylcclxuXHRhY3RpdmVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uc19fbWlkZGxlLS1hY3RpdmUnKVxyXG5cdGNvbXBsZXRlZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25zX19taWRkbGUtLWNvbXBsZXRlZCcpXHJcblx0Y2xlYXJDb21sZXRlZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25zX19jbGVhci1jb21wbGV0ZWQnKVxyXG5cdG91dHB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdXRwdXQnKVxyXG5cdGVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8tdXBfX2Vycm9yJylcclxuXHRhZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby11cF9fYWRkLS1hZGQtYnRuJylcclxuXHRvdXRwdXRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm91dHB1dF9fYm94JylcclxuXHRidG5BcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbnNfX21pZGRsZScpXHJcblxyXG5cdG91dHB1dExpc3RBcnIgPSBbLi4ub3V0cHV0TGlzdF1cclxufVxyXG5cclxuY29uc3QgcHJlcGFyZURPTUV2ZW50cyA9ICgpID0+IHtcclxuXHRhZGRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGtleUV2ZW50Q2hlY2spXHJcblx0YWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkTmV3VG9kbylcclxuXHRvdXRwdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGVja0NsaWNrKVxyXG5cdG91dHB1dC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBzaG93RGVsZXRlQnRuKVxyXG5cdG91dHB1dC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGhpZGVEZWxldGVCdG4pXHJcblx0ZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGVsZXRlVG9kbylcclxuXHRhY3RpdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93QWN0aXZlVG9kbylcclxuXHRhbGxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93QWxsVG9kbylcclxuXHRjb21wbGV0ZWRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93Q29tcGxldGVkVG9kbylcclxuXHRidG5BcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2V0Rm9jdXMpXHJcblx0Y2xlYXJDb21sZXRlZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsZWFyQ29tbGV0ZWQpXHJcblx0dGhlbWVJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hhbmdlVGhlbWUpXHJcbn1cclxuXHJcbmNvbnN0IG1haW4gPSAoKSA9PiB7XHJcblx0cHJlcGFyZURPTUVsZW1lbnRzKClcclxuXHRwcmVwYXJlRE9NRXZlbnRzKClcclxufVxyXG5cclxuY29uc3QgYWRkTmV3VG9kbyA9IGUgPT4ge1xyXG5cdGUucHJldmVudERlZmF1bHQoKVxyXG5cclxuXHRpZiAoYWRkSW5wdXQudmFsdWUgIT09ICcnKSB7XHJcblx0XHRjb25zdCBuZXdUb2RvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKVxyXG5cdFx0bmV3VG9kby50ZXh0Q29udGVudCA9IGFkZElucHV0LnZhbHVlXHJcblx0XHRuZXdUb2RvLmNsYXNzTGlzdC5hZGQoJ291dHB1dF9fYm94JylcclxuXHRcdG5ld1RvZG8uc2V0QXR0cmlidXRlKCdkYXRhLWJveCcsIGAke2RvY3VtZW50LmJvZHkuZGF0YXNldC5iZyA9PT0gJ2RhcmsnID8gJ2RhcmsnIDogJ2xpZ2h0J31gKVxyXG5cdFx0b3V0cHV0LmFwcGVuZChuZXdUb2RvKVxyXG5cclxuXHRcdGNvbnN0IGNoZWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuXHRcdGNoZWNrLmNsYXNzTGlzdC5hZGQoJ291dHB1dF9fYm94LS1jaGVjaycpXHJcblx0XHRjaGVjay5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2hlY2snLCBgJHtkb2N1bWVudC5ib2R5LmRhdGFzZXQuYmcgPT09ICdkYXJrJyA/ICdkYXJrJyA6ICdsaWdodCd9YClcclxuXHJcblx0XHRjb25zdCByZW1vdmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxyXG5cdFx0cmVtb3ZlLmNsYXNzTGlzdC5hZGQoJ291dHB1dF9fYm94LS1kZWxldGUnKVxyXG5cdFx0cmVtb3ZlLnNldEF0dHJpYnV0ZSgnZGF0YS1kZWxldGUnLCBgJHtkb2N1bWVudC5ib2R5LmRhdGFzZXQuYmcgPT09ICdkYXJrJyA/ICdkYXJrJyA6ICdsaWdodCd9YClcclxuXHJcblx0XHRuZXdUb2RvLmFwcGVuZChjaGVjaywgcmVtb3ZlKVxyXG5cclxuXHRcdGFkZElucHV0LnZhbHVlID0gJydcclxuXHRcdGVycm9yLnRleHRDb250ZW50ID0gJydcclxuXHRcdGNvdW50VG9kb2VzKClcclxuXHRcdG91dHB1dExpc3RBcnIucHVzaChuZXdUb2RvKVxyXG5cdH0gZWxzZSB7XHJcblx0XHRlcnJvci50ZXh0Q29udGVudCA9IFwiVGhpcyBmaWVsZCBjYW4ndCBiZSBlbXB0eVwiXHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBjaGVja0NsaWNrID0gZSA9PiB7XHJcblx0aWYgKGUudGFyZ2V0Lm1hdGNoZXMoJy5vdXRwdXRfX2JveC0tY2hlY2snKSkge1xyXG5cdFx0ZS50YXJnZXQuY2xvc2VzdCgnbGknKS5jbGFzc0xpc3QudG9nZ2xlKCdjb21wbGV0ZS10b2RvJylcclxuXHRcdGUudGFyZ2V0LmNsb3Nlc3QoJ2J1dHRvbicpLmNsYXNzTGlzdC50b2dnbGUoJ2NvbXBsZXRlJylcclxuXHRcdGNvdW50VG9kb2VzKClcclxuXHR9IGVsc2UgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoJy5vdXRwdXRfX2JveC0tZGVsZXRlJykpIHtcclxuXHRcdGRlbGV0ZVRvZG8oZSlcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuXHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBzaG93RGVsZXRlQnRuID0gZSA9PiB7XHJcblx0aWYgKGUudGFyZ2V0Lm1hdGNoZXMoJ2xpJykpIHtcclxuXHRcdGUudGFyZ2V0Lmxhc3RFbGVtZW50Q2hpbGQuc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xyXG5cdH0gZWxzZSBpZiAoZS50YXJnZXQubWF0Y2hlcygnLm91dHB1dF9fYm94LS1kZWxldGUnKSkge1xyXG5cdFx0ZS50YXJnZXQuc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXR1cm5cclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IGhpZGVEZWxldGVCdG4gPSBlID0+IHtcclxuXHRpZiAoZS50YXJnZXQubWF0Y2hlcygnbGknKSkge1xyXG5cdFx0ZS50YXJnZXQubGFzdEVsZW1lbnRDaGlsZC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcblx0fSBlbHNlIHtcclxuXHRcdHJldHVyblxyXG5cdH1cclxufVxyXG5cclxuY29uc3QgZGVsZXRlVG9kbyA9IGUgPT4ge1xyXG5cdGUudGFyZ2V0LmNsb3Nlc3QoJ2xpJykucmVtb3ZlKCdsaScpXHJcblxyXG5cdGNvbnN0IGFsbFRvZG8gPSBvdXRwdXQucXVlcnlTZWxlY3RvckFsbCgnbGknKVxyXG5cclxuXHRpZiAoYWxsVG9kby5sZW5ndGggPT09IDApIHtcclxuXHRcdGVycm9yLnRleHRDb250ZW50ID0gJ1lvdSBoYXZlIG5vdGhpbmcgdG8gZG8uJ1xyXG5cdH1cclxuXHRjb3VudFRvZG9lcygpXHJcbn1cclxuXHJcbmNvbnN0IGNvdW50VG9kb2VzID0gKCkgPT4ge1xyXG5cdGFsbFRvZG8gPSBvdXRwdXQucXVlcnlTZWxlY3RvckFsbCgnbGknKVxyXG5cdGNvbnN0IGFsbFRvZG9BcnIgPSBbLi4uYWxsVG9kb11cclxuXHRjb25zdCBjb21wbGV0ZUFyciA9IGFsbFRvZG9BcnIuZmlsdGVyKFxyXG5cdFx0dG9kbyA9PiB0b2RvLmNsYXNzTGlzdC5jb250YWlucygnY29tcGxldGUtdG9kbycpICYmIHRvZG8uZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wbGV0ZScpXHJcblx0KVxyXG5cclxuXHRjb25zdCBhY3RpdmVBcnIgPSBhbGxUb2RvQXJyLmZpbHRlcihcclxuXHRcdHRvZG8gPT4gIXRvZG8uY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wbGV0ZS10b2RvJykgJiYgIXRvZG8uZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wbGV0ZScpXHJcblx0KVxyXG5cclxuXHRjb3VudE9mVG9kby50ZXh0Q29udGVudCA9IGFsbFRvZG8ubGVuZ3RoIC0gY29tcGxldGVBcnIubGVuZ3RoXHJcblxyXG5cdGNvbXBsZXRlZFRvZG9lc0FyciA9IFtdLmNvbmNhdChjb21wbGV0ZUFycilcclxuXHRhY3RpdmVUb2RvZXNBcnIgPSBbXS5jb25jYXQoYWN0aXZlQXJyKVxyXG5cdGFsbFRvZG9lc0FyciA9IFtdLmNvbmNhdChjb21wbGV0ZUFyciwgYWN0aXZlQXJyKVxyXG59XHJcblxyXG5jb25zdCBzZXRGb2N1cyA9IGUgPT4ge1xyXG5cdGNvbnN0IGFsbEJ0bnMgPSBidG5BcmVhLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpXHJcblx0Y29uc3QgYnRuQXJlYUFyciA9IFsuLi5hbGxCdG5zXVxyXG5cdGJ0bkFyZWFBcnIuZm9yRWFjaChidG4gPT4ge1xyXG5cdFx0YnRuLnN0eWxlLmNvbG9yID0gJ2hzbCgyMzQsIDExJSwgNTIlKSdcclxuXHRcdGUudGFyZ2V0LnN0eWxlLmNvbG9yID0gJ2hzbCgyMjAsIDk4JSwgNjElKSdcclxuXHR9KVxyXG59XHJcblxyXG5jb25zdCBzaG93QWN0aXZlVG9kbyA9ICgpID0+IHtcclxuXHRvdXRwdXQuaW5uZXJIVE1MID0gYWN0aXZlVG9kb2VzQXJyXHJcblx0XHQubWFwKGFjdGl2ZSA9PiB7XHJcblx0XHRcdHJldHVybiBgIDxsaSBjbGFzcz1cIm91dHB1dF9fYm94XCIgZGF0YS1ib3g9XCIke2RvY3VtZW50LmJvZHkuZGF0YXNldC5iZyA9PT0gJ2RhcmsnID8gJ2RhcmsnIDogJ2xpZ2h0J31cIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm91dHB1dF9fYm94LS1jaGVja1wiIHR5cGU9XCJidXR0b25cIiBhcmlhLWxhYmVsPVwiY2hlY2tcIiBkYXRhLWNoZWNrPVwiJHtcclxuXHRcdFx0XHRcdFx0XHRkb2N1bWVudC5ib2R5LmRhdGFzZXQuYmcgPT09ICdkYXJrJyA/ICdkYXJrJyA6ICdsaWdodCdcclxuXHRcdFx0XHRcdFx0fVwiPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAke2FjdGl2ZS50ZXh0Q29udGVudH1cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm91dHB1dF9fYm94LS1kZWxldGVcIiB0eXBlPVwiYnV0dG9uXCIgYXJpYS1sYWJlbD1cImRlbGV0ZVwiIGRhdGEtZGVsZXRlPVwiJHtcclxuXHRcdFx0XHRcdFx0XHRkb2N1bWVudC5ib2R5LmRhdGFzZXQuYmcgPT09ICdkYXJrJyA/ICdkYXJrJyA6ICdsaWdodCdcclxuXHRcdFx0XHRcdFx0fVwiPjwvYnV0dG9uPlxyXG4gICAgICAgIDwvbGk+YFxyXG5cdFx0fSlcclxuXHRcdC5qb2luKCcnKVxyXG59XHJcblxyXG5jb25zdCBzaG93QWxsVG9kbyA9ICgpID0+IHtcclxuXHRvdXRwdXQuaW5uZXJIVE1MID0gYWxsVG9kb2VzQXJyXHJcblx0XHQubWFwKGFsbCA9PiB7XHJcblx0XHRcdHJldHVybiBgPGxpIGNsYXNzPVwib3V0cHV0X19ib3ggJHthbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wbGV0ZS10b2RvJykgPyAnY29tcGxldGUtdG9kbycgOiAnJ31cIiBkYXRhLWJveD1cIiR7XHJcblx0XHRcdFx0ZG9jdW1lbnQuYm9keS5kYXRhc2V0LmJnID09PSAnZGFyaycgPyAnZGFyaycgOiAnbGlnaHQnXHJcblx0XHRcdH1cIj5cclxuXHRcdDxidXR0b24gY2xhc3M9XCJvdXRwdXRfX2JveC0tY2hlY2sgJHtcclxuXHRcdFx0YWxsLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5jb250YWlucygnY29tcGxldGUnKSA/ICdjb21wbGV0ZScgOiAnJ1xyXG5cdFx0fVwiIHR5cGU9XCJidXR0b25cIiBhcmlhLWxhYmVsPVwiY2hlY2tcIiBkYXRhLWNoZWNrPVwiJHtkb2N1bWVudC5ib2R5LmRhdGFzZXQuYmcgPT09ICdkYXJrJyA/ICdkYXJrJyA6ICdsaWdodCd9XCI+PC9idXR0b24+XHJcblx0XHRcdCR7YWxsLnRleHRDb250ZW50fVxyXG5cdFx0PGJ1dHRvbiBjbGFzcz1cIm91dHB1dF9fYm94LS1kZWxldGVcIiB0eXBlPVwiYnV0dG9uXCIgYXJpYS1sYWJlbD1cImRlbGV0ZVwiIGRhdGEtZGVsZXRlPVwiJHtcclxuXHRcdFx0ZG9jdW1lbnQuYm9keS5kYXRhc2V0LmJnID09PSAnZGFyaycgPyAnZGFyaycgOiAnbGlnaHQnXHJcblx0XHR9XCI+PC9idXR0b24+XHJcblx0PC9saT5gXHJcblx0XHR9KVxyXG5cdFx0LmpvaW4oJycpXHJcbn1cclxuXHJcbmNvbnN0IHNob3dDb21wbGV0ZWRUb2RvID0gKCkgPT4ge1xyXG5cdG91dHB1dC5pbm5lckhUTUwgPSBjb21wbGV0ZWRUb2RvZXNBcnJcclxuXHRcdC5tYXAoY29tcGxldGUgPT4ge1xyXG5cdFx0XHRyZXR1cm4gYDxsaSBjbGFzcz1cIm91dHB1dF9fYm94IGNvbXBsZXRlLXRvZG9cIiBkYXRhLWJveD1cIiR7XHJcblx0XHRcdFx0ZG9jdW1lbnQuYm9keS5kYXRhc2V0LmJnID09PSAnZGFyaycgPyAnZGFyaycgOiAnbGlnaHQnXHJcblx0XHRcdH1cIj5cclxuXHRcdDxidXR0b24gY2xhc3M9XCJvdXRwdXRfX2JveC0tY2hlY2sgY29tcGxldGVcIiB0eXBlPVwiYnV0dG9uXCIgYXJpYS1sYWJlbD1cImNoZWNrXCIgZGF0YS1jaGVjaz1cIiR7XHJcblx0XHRcdGRvY3VtZW50LmJvZHkuZGF0YXNldC5iZyA9PT0gJ2RhcmsnID8gJ2RhcmsnIDogJ2xpZ2h0J1xyXG5cdFx0fVwiPjwvYnV0dG9uPlxyXG5cdFx0XHQke2NvbXBsZXRlLnRleHRDb250ZW50fVxyXG5cdFx0PGJ1dHRvbiBjbGFzcz1cIm91dHB1dF9fYm94LS1kZWxldGVcIiB0eXBlPVwiYnV0dG9uXCIgYXJpYS1sYWJlbD1cImRlbGV0ZVwiIGRhdGEtZGVsZXRlPVwiJHtcclxuXHRcdFx0ZG9jdW1lbnQuYm9keS5kYXRhc2V0LmJnID09PSAnZGFyaycgPyAnZGFyaycgOiAnbGlnaHQnXHJcblx0XHR9XCI+PC9idXR0b24+XHJcblx0PC9saT5gXHJcblx0XHR9KVxyXG5cdFx0LmpvaW4oJycpXHJcbn1cclxuXHJcbmNvbnN0IGNsZWFyQ29tbGV0ZWQgPSBlID0+IHtcclxuXHRjb21wbGV0ZWRUb2RvZXNBcnIgPSBbXVxyXG5cdGFsbFRvZG9lc0FyciA9IGFjdGl2ZVRvZG9lc0FyclxyXG5cclxuXHRpZiAoYWN0aXZlQnRuLnN0eWxlLmNvbG9yID09PSAncmdiKDU4LCAxMjMsIDI1MyknKSB7XHJcblx0XHRzaG93QWN0aXZlVG9kbygpXHJcblx0fSBlbHNlIGlmIChjb21wbGV0ZWRCdG4uc3R5bGUuY29sb3IgPT09ICdyZ2IoNTgsIDEyMywgMjUzKScpIHtcclxuXHRcdHNob3dDb21wbGV0ZWRUb2RvKClcclxuXHR9IGVsc2Uge1xyXG5cdFx0c2hvd0FsbFRvZG8oKVxyXG5cdFx0YWxsVG9kb2VzQXJyLmxlbmd0aCA9PT0gMCA/IChlcnJvci50ZXh0Q29udGVudCA9ICdZb3UgaGF2ZSBub3RoaW5nIHRvIGRvLicpIDogKGVycm9yLnRleHRDb250ZW50ID0gJycpXHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBjaGFuZ2VUaGVtZSA9IGUgPT4ge1xyXG5cdGNvbnN0IGNoZWNrQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vdXRwdXRfX2JveC0tY2hlY2snKVxyXG5cdGNvbnN0IGNoZWNrQnRuc0FyciA9IFsuLi5jaGVja0J0bnNdXHJcblxyXG5cdGNvbnN0IGRlbGV0ZUJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3V0cHV0X19ib3gtLWRlbGV0ZScpXHJcblx0Y29uc3QgZGVsZXRlQnRuc0FyciA9IFsuLi5kZWxldGVCdG5zXVxyXG5cclxuXHRjb25zdCBidXR0b25zU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25zJylcclxuXHJcblx0dGhlbWVJY29uLmNsYXNzTGlzdC50b2dnbGUoJ3N1bicpXHJcblx0dGhlbWVJY29uLmNsYXNzTGlzdC50b2dnbGUoJ21vb24nKVxyXG5cclxuXHRpZiAodGhlbWVJY29uLmNsYXNzTGlzdC5jb250YWlucygnbW9vbicpKSB7XHJcblx0XHRkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZSgnZGF0YS1iZycsICdsaWdodCcpXHJcblx0XHRhZGRJbnB1dC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaW5wdXQnLCAnbGlnaHQnKVxyXG5cdFx0YWxsVG9kb2VzQXJyLmZvckVhY2gobGkgPT4ge1xyXG5cdFx0XHRsaS5zZXRBdHRyaWJ1dGUoJ2RhdGEtYm94JywgJ2xpZ2h0JylcclxuXHRcdH0pXHJcblx0XHRjaGVja0J0bnNBcnIuZm9yRWFjaChidG4gPT4gYnRuLnNldEF0dHJpYnV0ZSgnZGF0YS1jaGVjaycsICdsaWdodCcpKVxyXG5cdFx0YWRkQnRuLnNldEF0dHJpYnV0ZSgnZGF0YS1hZGQnLCAnbGlnaHQnKVxyXG5cdFx0ZXJyb3Iuc2V0QXR0cmlidXRlKCdkYXRhLWVycm9yJywgJ2xpZ2h0JylcclxuXHRcdGRlbGV0ZUJ0bnNBcnIuZm9yRWFjaChidG4gPT4gYnRuLnNldEF0dHJpYnV0ZSgnZGF0YS1kZWxldGUnLCAnbGlnaHQnKSlcclxuXHRcdGJ1dHRvbnNTZWN0aW9uLnNldEF0dHJpYnV0ZSgnZGF0YS1idXR0b25zJywgJ2xpZ2h0JylcclxuXHRcdGJ0bkFyZWEuc2V0QXR0cmlidXRlKCdkYXRhLW1pZGRsZScsICdsaWdodCcpXHJcblx0fSBlbHNlIHtcclxuXHRcdGRvY3VtZW50LmJvZHkuc2V0QXR0cmlidXRlKCdkYXRhLWJnJywgJ2RhcmsnKVxyXG5cdFx0YWRkSW5wdXQuc2V0QXR0cmlidXRlKCdkYXRhLWlucHV0JywgJ2RhcmsnKVxyXG5cdFx0YWxsVG9kb2VzQXJyLmZvckVhY2gobGkgPT4ge1xyXG5cdFx0XHRsaS5zZXRBdHRyaWJ1dGUoJ2RhdGEtYm94JywgJ2RhcmsnKVxyXG5cdFx0fSlcclxuXHRcdGNoZWNrQnRuc0Fyci5mb3JFYWNoKGJ0biA9PiBidG4uc2V0QXR0cmlidXRlKCdkYXRhLWNoZWNrJywgJ2RhcmsnKSlcclxuXHRcdGFkZEJ0bi5zZXRBdHRyaWJ1dGUoJ2RhdGEtYWRkJywgJ2RhcmsnKVxyXG5cdFx0ZXJyb3Iuc2V0QXR0cmlidXRlKCdkYXRhLWVycm9yJywgJ2RhcmsnKVxyXG5cdFx0ZGVsZXRlQnRuc0Fyci5mb3JFYWNoKGJ0biA9PiBidG4uc2V0QXR0cmlidXRlKCdkYXRhLWRlbGV0ZScsICdkYXJrJykpXHJcblx0XHRidXR0b25zU2VjdGlvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtYnV0dG9ucycsICdkYXJrJylcclxuXHRcdGJ0bkFyZWEuc2V0QXR0cmlidXRlKCdkYXRhLW1pZGRsZScsICdkYXJrJylcclxuXHR9XHJcblxyXG5cdGlmIChhY3RpdmVCdG4uc3R5bGUuY29sb3IgPT09ICdyZ2IoNTgsIDEyMywgMjUzKScpIHtcclxuXHRcdHNob3dBY3RpdmVUb2RvKClcclxuXHR9IGVsc2UgaWYgKGNvbXBsZXRlZEJ0bi5zdHlsZS5jb2xvciA9PT0gJ3JnYig1OCwgMTIzLCAyNTMpJykge1xyXG5cdFx0c2hvd0NvbXBsZXRlZFRvZG8oKVxyXG5cdH0gZWxzZSB7XHJcblx0XHRzaG93QWxsVG9kbygpXHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBrZXlFdmVudENoZWNrID0gZSA9PiB7XHJcblx0aWYgKGUua2V5ID09PSAnRW50ZXInKSB7XHJcblx0XHRhZGROZXdUb2RvKClcclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IHNvcnRhYmxlTGlzdCA9IGV2ID0+IHtcclxuXHRsZXQgaXRlbXMgPSBhbGxUb2RvZXNBcnIsXHJcblx0XHRjdXJyZW50ID0gbnVsbFxyXG5cclxuXHRmb3IgKGxldCBpIG9mIGl0ZW1zKSB7XHJcblx0XHRpLmRyYWdnYWJsZSA9IHRydWVcclxuXHJcblx0XHRpLm9uZHJhZ3N0YXJ0ID0gZSA9PiB7XHJcblx0XHRcdGN1cnJlbnQgPSBpXHJcblx0XHRcdGZvciAobGV0IGl0IG9mIGl0ZW1zKSB7XHJcblx0XHRcdFx0aWYgKGl0ICE9IGN1cnJlbnQpIHtcclxuXHRcdFx0XHRcdGl0LmNsYXNzTGlzdC5hZGQoJ2hpbnQnKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGkub25kcmFnZW50ZXIgPSBlID0+IHtcclxuXHRcdFx0aWYgKGkgIT0gY3VycmVudCkge1xyXG5cdFx0XHRcdGkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGkub25kcmFnbGVhdmUgPSAoKSA9PiBpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcblxyXG5cdFx0aS5vbmRyYWdlbmQgPSAoKSA9PiB7XHJcblx0XHRcdGZvciAobGV0IGl0IG9mIGl0ZW1zKSB7XHJcblx0XHRcdFx0aXQuY2xhc3NMaXN0LnJlbW92ZSgnaGludCcpXHJcblx0XHRcdFx0aXQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGkub25kcmFnb3ZlciA9IGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpXHJcblxyXG5cdFx0aS5vbmRyb3AgPSBlID0+IHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpXHJcblx0XHRcdGlmIChpICE9IGN1cnJlbnQpIHtcclxuXHRcdFx0XHRsZXQgY3VycmVudHBvcyA9IDAsXHJcblx0XHRcdFx0XHRkcm9wcGVkcG9zID0gMFxyXG5cdFx0XHRcdGZvciAobGV0IGl0ID0gMDsgaXQgPCBpdGVtcy5sZW5ndGg7IGl0KyspIHtcclxuXHRcdFx0XHRcdGlmIChjdXJyZW50ID09IGl0ZW1zW2l0XSkge1xyXG5cdFx0XHRcdFx0XHRjdXJyZW50cG9zID0gaXRcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmIChpID09IGl0ZW1zW2l0XSkge1xyXG5cdFx0XHRcdFx0XHRkcm9wcGVkcG9zID0gaXRcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKGN1cnJlbnRwb3MgPCBkcm9wcGVkcG9zKSB7XHJcblx0XHRcdFx0XHRpLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGN1cnJlbnQsIGkubmV4dFNpYmxpbmcpXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGkucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY3VycmVudCwgaSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgbWFpbilcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBjb3VudFRvZG9lcylcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBzb3J0YWJsZUxpc3QpXHJcbiJdfQ==
